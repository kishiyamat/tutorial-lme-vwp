---
layout: post
title: Rと統計の入門      
description: LMEの解説ページ 
---

<!-- [Home](./) -->

このチュートリアルには
<u> 統計パート</u> と <u>視線計測実験パート</u> があって、
統計パートのゴールは「一般化線形混合モデル」で分析できるようになる、というものでした。
そのためには「モデル」とか「統計」を知らないとならないのですが、
これは手を動かして見たほうが分かりやすかったりします。

手を動かすためにRというプログラミング言語と設定の諸々を
従来の勉強会では行ってきたのですが、
最近は今みなさんが見ているこの画面上でRが走ります。
そこでこのページでは (i)Rの基本を理解して 
(ii) 「モデル」を作る意味 
(iii) 統計を学ぶメリット について手を動かしながら学んでいきましょう。
そして 

<!--
目的
-->

## Rの基本

<!--
https://www.datacamp.com/community/tutorials/r-formula-tutorial
-->

ここでは問題をどんどんと解いて
統計とモデルの理解を深める準備をしましょう。
そのためにまずは良くある一次式 $y=ax+b$ を考えながら、
定義と変数、そして `formula` という概念を学んでいきます。
まずは $y=ax+b$ を再現するため、まずは aを2, xを3, bを4と「定義」
してみましょう。

Rでは `a` を `2` と定義するとき `a=2` と表現します[^eq]。
どうように `x` と `b` を定義した後、
`a*x + b` を計算してみましょう。
ここで `*` は掛け算で `+` が足し算になり、
その他 `/` が割り算で `-` が引き算になります。
その後 `print()`のカッコに値を入れると表示できます。

[^eq]: Rのコーディング規約的には `<-` が好ましいですが、
    そういうのは `styler` で一発で終わるので問題ありません。
    クラスを定義するときには違いがでてきますが、
    そういうのを気にする必要はまだありませんよね。

<div data-datacamp-exercise data-lang="r">
  <code data-type="pre-exercise-code">
  </code>
  <code data-type="sample-code">
      # aを2と定義するときは a=2 とします。
      # a, x, b を定義した後、
      # y = a*x + b で一次式の結果を計算できます。
      # print(y) としてみましょう。
  </code>
  <code data-type="solution">
      # Create a variable a, equal to 5
      a <- 2
      x <- 3
      b <- 4
      # Print out a
      y = a*x + b
      print(y)
  </code>
  <code data-type="sct">
      test_object("y")
      test_function("print")
      success_msg("Great job!")
  </code>
  <div data-type="hint">Use the assignment operator (<code><-</code> or <code>=</code> ) to create the variables.
  </div>
</div>


<!--
多分関数の話はいらない
-->

うえでの掛け算や足し算は複数の値にまとめて適用できます。
例えば、Rでは1から10の整数を `1:10` と表現できます。
このような複数の値のことを atomic vector と呼ぶのですが、
これを大文字の`X`に入れてみて、
先ほどと同様に `a*X + b` を計算して見ましょう。

<div data-datacamp-exercise data-lang="r">
  <code data-type="pre-exercise-code">
      a <- 2
      b <- 4
  </code>
  <code data-type="sample-code">
      # X = 1:10 で atomic vector を X に与えましょう。
      # a と b は定義してあるので、
      # Y = a*X + b で一次式の結果を計算できます。
      # print(Y) としてみましょう。
  </code>
  <code data-type="solution">
      # Create a variable a, equal to 5
      X <- 1:10
      # Print out a
      Y = a*X + b
      print(Y)
  </code>
  <code data-type="sct">
      test_object("X")
      test_object("Y")
      test_function("print")
      success_msg("Great job!")
  </code>
  <div data-type="hint">Use the assignment operator (<code><-</code> or <code>=</code> ) to create the variables.
  </div>
</div>

ちゃんと1から10の整数に2をかけて4を足した値が戻ってきましたね。
数字が出てきてもわかりづらいので、
`plot` という関数を使って`X`と`Y`の関係を図示してみましょう。

<div data-datacamp-exercise data-lang="r">
  <code data-type="pre-exercise-code">
      a <- 2
      b <- 4
      X <- 1:10
      Y = a*X + b
  </code>
  <code data-type="sample-code">
      # aを1と定義するときは a=1 とします。
      # plot(X, Y) でxとyの値を与えて図示できます。
  </code>
  <code data-type="solution">
      # Create a variable a, equal to 5
      plot(X, Y)
  </code>
  <code data-type="sct">
      plot(X, Y)
  </code>
  <div data-type="hint">Use the assignment operator (<code><-</code> or <code>=</code> ) to create the variables.
  </div>
</div>

さて、ここまでのところで「定義」や「変数」といった概念や、
値には一つのものや複数のものがあることがわかったと思います。
ただ現実の問題で $y=ax+b$ はわかりません。
そもそもyを説明するxがわかりませんし、
xがどのくらい大切なのかもわからないのです。

この 1. どの要因が 2. どの程度役に立つのか
を定量的に教えてくれるのがモデルになります。

## 「モデル」を作る意味

<!--
https://r4ds.had.co.nz/model-basics.html#model-basics
-->
次にRの特徴である formula という概念に移ります。

先ほどは $y=ax+b$ を再現するため、まずは aを2, xを3, bを4と「定義」して
掛け算足し算をしましたが、
実はRだと `y ~ x` だけで表現できます。
そんな formula の表現は `f = y ~ x` と`f`に定義できます。

さっきの `X` と `y` は

統計を学ぶ意義と「モデル」について学ぶには
手を動かすのが一番の近道です。

<!--相関と因果関係について-->
<!--
-->
## 統計を学ぶメリット


<!--
-->

現象の構成要素と各要素の重要さを検証する


実験や仮説検定という文脈を置くと、実験デザインは
実験をしてから統計をかけようとすると苦しいことになるのはなんででしょう。
交絡


AならばBの図式を取る。
AでないならばBでない
* 「私はこう思う」より多少マシで再現性を担保しやすくなる
* いわゆる「有意差」を見ればいいと勘違いしはじめる


この資料は視線計測実験のチュートリアルの前座で、
実験の後に通常かける分析についてのチュートリアルです。
ならなんで実験前にチュートリアルをやるのかというと、
実験を行う手順は 1. 使う統計モデルを決める 2. 実験する 3. 統計的仮説検定にかける
だからです。
つまり、統計をきめるというからには 1. 統計的仮説検定とはなにか、2. 統計モデルの種類
を知らないとならないわけです。

ただ、統計とはなんですか、一般化線形モデルとはなんですか、
という初歩から説明する事はありません。
そこは教科書に任せます。
このチュートリアルでやるのはその一歩先の
一般化線形混合モデルです。
基本的には統計の基礎、線形モデル、一般化線形モデルは教科書、
一般化線形混合モデルは新規の資料を作成、という形にします。

そもそも「仮説ってなんですか」という話ですが、
これは「結果Yに対して要因Aは影響する」のような命題のことです。
結果の例には 1. 読み時間とか 2. リスニングの正解率とか 3. 特定の画像への注視時間などの
数値にできるような値があります。
その結果(あるいはその結果が反映していると仮定されているなにか)に
影響する要因を知り尽くすことが目的な場合、
「結果Yに対して要因Aは影響する」という仮説を検証していかなければなりません。

また「うーん実験っていっても人を対象にするような内容じゃないしなぁ」
と思われる方もいるかも知れませんが、ここでいう「実験」はあくまでも表現であって、
もしかするとすでに手元にあるデータを何らかの仮説を持って検証することもあるかもしれません。
そういうのも実験と言って良いのではないかと思います。
要は人を対象とした実験に限った内容ではなく、
とにかくデータがあって統計モデルを使って仮説を検証する流れができるようになればいいです。

ここまででは仮説と実験の話しかしてませんが、
以下に 1. 統計的仮説検定とはなにか、2. 統計モデルの種類
についての概要とこのチュートリアルの構成を書いていきます。


ここまででは仮説と実験の話しかしてませんが、
まだ 1. 統計的仮説検定とはなにか、2. 統計モデルの種類
についての概要とこのチュートリアルの構成を書いていきます。
向けに統計を使った議論の仕方を共有することを

* 誰向けか
* 何をするか
* いつするか

心理言語学のデータ分析で使う一般化線形混合モデルまでのマイルストーン

* 統計的仮説検定の基本
* 線形モデルと一般化線形モデル
* 一般化線形混合モデル 

----------------

